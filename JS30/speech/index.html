<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speech</title>
</head>

<body>
    <div class="words" contenteditable></div>
</body>
<script>
    window.SpeechRecognition = window.SpeechRecognition || webkitSpeechRecognition;


    // https://github.com/wesbos/JavaScript30/blob/master/20%20-%20Speech%20Detection/index-FINISHED.html


    const recon = new SpeechRecognition();
    recon.interimResults = true;
    recon.lang = 'en-US'

    let p = document.createElement('p')
    const word = document.querySelector('.words')
    word.appendChild(p)

    recon.addEventListner('result', e => {
        const transcript = Array.from(e.results)
            .map(res => res[0])
            .map(res => res.transcript)
            .join('')

        const poopscript = transcript.replace(/poop|poo|shit|dump/gi, 'ðŸ’©')
        p.textContent = poopscript

        if (e.results[0].isFinal) {
            p = document.createElement('p')
            word.appendChild(p)
        }
        recon.addEventListener('end', recon.start);

        recon.start();

    })







</script>


<style>

html{font-size: 10px;}
body{
    background: #ffc600;
    font-family: sans-serif;
    font-weight: 200;
    font-size: 20px;
}
.words{
    max-width: 500px;
    margin: 50px auto;
    background: white;
    border-radius: 5px;

}

</style>

</html>